$names = "GIT_SSL_CAINFO","CURL_CA_BUNDLE","REQUESTS_CA_BUNDLE","SSL_CERT_FILE"
$names | % { "$_ = " + ([Environment]::GetEnvironmentVariable($_,"User") ?? `
                       [Environment]::GetEnvironmentVariable($_,"Machine") ?? `
                       [Environment]::GetEnvironmentVariable($_,"Process")) }


C:\Program Files\Git\usr\ssl\certs\ca-bundle.crt
$bundle = "C:\Program Files\Git\usr\ssl\certs\ca-bundle.crt"

# Update only if the file exists
if(-not (Test-Path $bundle)){ throw "Git CA bundle not found at: $bundle" }

[Environment]::SetEnvironmentVariable("GIT_SSL_CAINFO",$bundle,"User")
[Environment]::SetEnvironmentVariable("CURL_CA_BUNDLE",$bundle,"User")
[Environment]::SetEnvironmentVariable("GIT_SSL_CAINFO",$bundle,"Machine")
[Environment]::SetEnvironmentVariable("CURL_CA_BUNDLE",$bundle,"Machine")

  
$scopes = "User","Machine"
foreach($s in $scopes){
  [Environment]::SetEnvironmentVariable("GIT_SSL_CAINFO",$null,$s)
  [Environment]::SetEnvironmentVariable("CURL_CA_BUNDLE",$null,$s)
  [Environment]::SetEnvironmentVariable("REQUESTS_CA_BUNDLE",$null,$s)
  [Environment]::SetEnvironmentVariable("SSL_CERT_FILE",$null,$s)
}

az storage fs access set --account-name adhisobuffadlsprd --file-system adh_isobuff --path "lz" --acl "user:<spnObjectId>:rw-" --auth-mode login


az config get core.ca_cert
_----------------------

# PowerShell
$names = "SSL_CERT_FILE","REQUESTS_CA_BUNDLE","CURL_CA_BUNDLE","GIT_SSL_CAINFO"
$names | ForEach-Object {
  "{0} = {1}" -f $_,[Environment]::GetEnvironmentVariable($_,"Process") ??
                    [Environment]::GetEnvironmentVariable($_,"User") ??
                    [Environment]::GetEnvironmentVariable($_,"Machine")
}


az storage fs access set --account-name adhisobuffadlsprd --file-system adh_isobuff --path "lz" --acl ("user:{0}:rw-" -f (az ad sp list --display-name "ADH_Ext_Databahn_SPN_prd" --query "[?displayName=='ADH_Ext_Databahn_SPN_prd'].id | [0]" -o tsv)) --auth-mode login


# Get the SPN objectId
$spnId = az ad sp list --display-name "ADH_Ext_Databahn_SPN_prd" --query "[0].id" -o tsv

# Change ACL on /adh_isobuff/lz (filesystem=adh_isobuff, path=lz) to read+write (rw-)
az storage fs access set --account-name adhisobuffadlsprd --file-system adh_isobuff --path "lz" --acl "user:$spnId:rw-" --auth-mode login

# (Optional) if the SPN must traverse the folder, use rwx instead:
# az storage fs access set --account-name adhisobuffadlsprd --file-system adh_isobuff --path "lz" --acl "user:$spnId:rwx" --auth-mode login


az storage fs access show --account-name adhisobuffadlsprd --file-system adh_isobuff --path "lz" --auth-mode login


